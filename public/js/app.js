"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["/js/app"],{

/***/ "./resources/js/app.js":
/*!*****************************!*\
  !*** ./resources/js/app.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _bootstrap__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./bootstrap */ "./resources/js/bootstrap.js");

window.addEventListener("DOMContentLoaded", function (e) {
  this.window.showPassword = function showPassword(id) {
    var password = document.getElementById(id);
    if (password.type === "password") {
      password.type = "text";
    } else {
      password.type = "password";
    }
  };
  this.window.addListItem = function addListItem() {
    var listUOM = document.getElementById('uom').value;
    var finalIElement = document.getElementById('final-i');
    var itemTable = document.getElementById('item-table-body');
    var finalI = finalIElement.value;
    finalIElement.value = +finalI + 1;
    var row = document.createElement("tr");

    // Create cells and input elements.
    var cell0 = document.createElement("th");
    cell0.scope = 'row';
    cell0.innerHTML = finalI;
    var cell1 = document.createElement("td");
    var counter = document.createElement("input");
    counter.type = "hidden";
    counter.name = "id[]";
    counter.id = 'id-' + finalI;
    counter.value = finalI;
    counter.setAttribute('data-column-name', 'id');
    var itemName = createListItemInput('text', 'itemName', finalI, 'item_name');
    itemName.placeholder = 'Item Name';
    itemName.classList.add('form-control');
    // itemName.onclick = '';

    var cell2 = document.createElement("td");
    var itemWeight = createListItemInput('number', 'itemWeight', finalI, 'item_weight');
    itemWeight.value = 0;
    itemWeight.classList.add('for-weight');
    itemWeight.classList.add('number-input');
    itemWeight.classList.add('form-control');
    cell2.classList.add('number-col');

    //for radios on click-> getConversionRate();.
    //add pounds and kilos?
    //set total label on click
    var cell3 = document.createElement("td");
    var ouncesRadio;
    var poundsRadio;
    var gramsRadio;
    var kilosRadio;
    var ouncesRadioLabel;
    var poundsRadioLabel;
    var gramsRadioLabel;
    var kilosRadioLabel;
    if (listUOM === 'us') {
      ouncesRadio = createRadio('in_ounces', '', 'oz', finalI);
      ouncesRadioLabel = createLabel('OZ', 'uom-oz-' + finalI, 'oz', finalI);
      poundsRadio = createRadio('in_pounds', '', 'lbs', finalI);
      poundsRadioLabel = createLabel('LBS', 'uom-lbs-' + finalI, 'lbs', finalI);
    } else {
      gramsRadio = createRadio('in_grams', '', 'gram', finalI);
      gramsRadioLabel = createLabel('Grams', 'uom-gram-' + finalI, 'gram', finalI);
      kilosRadio = createRadio('in_kg', '', 'kg', finalI);
      kilosRadioLabel = createLabel('KG', 'uom-kg-' + finalI, 'kg', finalI);
    }
    var cell4 = document.createElement("td");
    cell4.classList.add('number-col');
    var packedAmount = createListItemInput('number', 'packedAmount', finalI, 'amount');
    packedAmount.value = 1;
    packedAmount.classList.add('for-weight');
    packedAmount.classList.add('number-input');
    packedAmount.classList.add('form-control');
    var cell5 = document.createElement("td");
    cell5.classList.add('number-col');
    var totalLineWeight = createListItemInput('number', 'totalLineWeight', finalI, 'total_line_weight');
    totalLineWeight.value = 0; //getLineTotalWeight();
    totalLineWeight.setAttribute('data-column-name', 'total_line_weight');
    totalLineWeight.setAttribute('readonly', true);
    totalLineWeight.classList.add('number-input');
    totalLineWeight.classList.add('form-control');

    //append inputs to cells.
    cell1.appendChild(counter);
    cell1.appendChild(itemName);
    cell2.appendChild(itemWeight);
    var selectCell = document.createElement("td");
    var categorySelect = getCategroySelect(finalI);
    selectCell.append(categorySelect);
    if (listUOM === 'us') {
      cell3.appendChild(ouncesRadio);
      cell3.appendChild(ouncesRadioLabel);
      cell3.appendChild(poundsRadio);
      cell3.appendChild(poundsRadioLabel);
    } else {
      cell3.appendChild(gramsRadio);
      cell3.appendChild(gramsRadioLabel);
      cell3.appendChild(kilosRadio);
      cell3.appendChild(kilosRadioLabel);
    }
    cell4.appendChild(packedAmount);
    cell5.appendChild(totalLineWeight);

    // Append cells to the row.
    row.appendChild(cell0);
    row.appendChild(cell1);
    row.appendChild(selectCell);
    row.appendChild(cell2);
    row.appendChild(cell4);
    row.appendChild(cell5);
    row.appendChild(cell3);

    // Append the row to the table.
    itemTable.appendChild(row);

    //add function to calculate total weight.
    var neededForWeights = document.querySelectorAll('.for-weight');
    neededForWeights.forEach(function (neededForWeight) {
      neededForWeight.addEventListener('change', function () {
        getLineTotalWeight(finalI);
      });
    });
  };
  this.window.updateUOM = function updateUOM(value) {
    if (value !== 'us') {
      usRadioToMetric();
    } else {
      metricRadioToUs();
    }
  };
  function getLineTotalWeight(row) {
    var weight = document.getElementById('itemWeight-' + row).value;
    var packedAmount = document.getElementById('packedAmount-' + row).value;
    var lineTotal = 0;
    lineTotal = +weight * +packedAmount;
    lineTotal = Math.round((lineTotal + Number.EPSILON) * 100) / 100;
    document.getElementById('totalLineWeight-' + row).value = lineTotal;
  }
  function createListItemInput(type, nameBase, row, columnName) {
    var element = document.createElement("input");
    element.type = type;
    element.name = nameBase + "[]";
    element.id = nameBase + '-' + row;
    element.value = '';
    element.setAttribute('data-column-name', columnName);
    return element;
  }
  function getCategroySelect(row) {
    var values = ['', 'clothes', 'worn_clothes', 'rain_gear', 'packs', 'consumables', 'shelter', 'fire_and_water_treatment', 'luxury_item', 'tech'];
    var texts = ['Choose', 'Clothes', 'Worn Clothes', 'Rain Gear', 'Packs', 'Consumbables', 'Shelter', 'Fire and Water Treatment', 'Luxury Item', 'Tech'];
    var select = document.createElement("select");
    select.id = 'ItemCategory-' + row;
    select.name = 'itemCategory-' + row;
    select.setAttribute('data-column-name', 'item_category');
    select.className = 'form-control';
    for (var i = 0; i < values.length; i++) {
      var option = document.createElement("option");
      option.value = values[i];
      option.text = texts[i];
      select.appendChild(option);
    }
    return select;
  }
  function metricRadioToUs() {
    var inputElements = document.querySelectorAll('.metric-radio');
    inputElements.forEach(function (inputElement) {
      var idArr = inputElement.id.split('-');
      var uom = idArr[1];
      var row = idArr[idArr.length - 1];
      var elementType = inputElement.type;
      var elementTag = inputElement.tagName.toLowerCase();
      var newElement;
      if (elementType === 'radio' && uom === 'gram') {
        newElement = createRadio('in_ounces', 'OZ', 'oz', row, true);
      } else if (elementType === 'radio' && uom === 'kg') {
        newElement = createRadio('in_pounds', 'LBS', 'lbs', row);
      } else if (elementTag === 'label' && uom === 'gram') {
        newElement = createLabel('OZ', 'uom-oz-' + row, 'oz', row);
      } else if (elementTag === 'label' && uom === 'kg') {
        newElement = createLabel('LBS', 'uom-lbs-' + row, 'lbs', row);
      }
      if (newElement) {
        inputElement.parentElement.replaceChild(newElement, inputElement);
      }
    });
  }
  function usRadioToMetric() {
    var inputElements = document.querySelectorAll('.us-radio');
    inputElements.forEach(function (inputElement) {
      var idArr = inputElement.id.split('-');
      var uom = idArr[1];
      var row = idArr[idArr.length - 1];
      var elementType = inputElement.type;
      var elementTag = inputElement.tagName.toLowerCase();
      var newElement;
      if (elementType === 'radio' && uom === 'oz') {
        newElement = createRadio('in_grams', 'Grams', 'gram', row);
      } else if (elementType === 'radio' && uom === 'lbs') {
        newElement = createRadio('in_kg', 'KG', 'kg', row);
      } else if (elementTag === 'label' && uom === 'oz') {
        newElement = createLabel('Grams', 'uom-gram-' + row, 'gram', row);
      } else if (elementTag === 'label' && uom === 'lbs') {
        newElement = createLabel('KG', 'uom-kg-' + row, 'kg', row);
      }
      if (newElement) {
        inputElement.parentElement.replaceChild(newElement, inputElement);
      }
    });
  }
  function createRadio(dataColumnName, label, uom, row) {
    var radio = document.createElement("input");
    radio.className = 'form-check-input' + (uom === 'gram' || uom === 'kg' ? ' metric-radio' : ' us-radio');
    radio.type = "radio";
    radio.name = "uom-" + row + "[]";
    radio.id = 'uom-' + uom + '-' + row;
    radio.setAttribute('data-column-name', dataColumnName);
    if (uom === 'gram' || uom === 'oz') {
      radio.checked = true;
    }
    radio.classList.add('for-weight');
    return radio;
  }
  function createLabel(innerHtml, htmlFor, uom, row) {
    var label = document.createElement("label");
    label.className = 'form-check-label' + (uom === 'gram' || uom === 'kg' ? ' metric-radio' : ' us-radio');
    label.htmlFor = htmlFor;
    label.innerHTML = innerHtml;
    label.id = 'uom-' + uom + '-label-' + row;
    return label;
  }
  var headers = document.querySelectorAll('.form-collapsible-header');
  headers.forEach(function (header) {
    header.addEventListener('click', function () {
      var content = header.nextElementSibling;
      var arrow = header.querySelector('.form-arrow');
      if (content.classList.contains('open')) {
        content.classList.remove('open');
        content.style.maxHeight = null;
        content.style.padding = '0 10px';
        arrow.innerHTML = '&#9660';
      } else {
        content.classList.add('open');
        content.style.maxHeight = content.scrollHeight + 'px';
        content.style.padding = '10px';
        arrow.innerHTML = '&#9650';
      }
    });
  });
});

/***/ }),

/***/ "./resources/js/bootstrap.js":
/*!***********************************!*\
  !*** ./resources/js/bootstrap.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ "./node_modules/axios/lib/axios.js");

window.axios = axios__WEBPACK_IMPORTED_MODULE_0__["default"];
window.axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';

/***/ }),

/***/ "./resources/sass/app.scss":
/*!*********************************!*\
  !*** ./resources/sass/app.scss ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["css/app","/js/vendor"], () => (__webpack_exec__("./resources/js/app.js"), __webpack_exec__("./resources/sass/app.scss")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNLENBQUNFLGtCQUFrQjtNQUN6QyxJQUFNQyxLQUFLLEdBQUdILE1BQU0sQ0FBQ0ksYUFBYSxDQUFDLGFBQWEsQ0FBQztNQUNqRCxJQUFJSCxPQUFPLENBQUNyRSxTQUFTLENBQUN5RSxRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUU7UUFDcENKLE9BQU8sQ0FBQ3JFLFNBQVMsQ0FBQzBFLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDaENMLE9BQU8sQ0FBQ00sS0FBSyxDQUFDQyxTQUFTLEdBQUcsSUFBSTtRQUM5QlAsT0FBTyxDQUFDTSxLQUFLLENBQUNFLE9BQU8sR0FBRyxRQUFRO1FBQ2hDTixLQUFLLENBQUMvRSxTQUFTLEdBQUcsUUFBUTtNQUc5QixDQUFDLE1BQU07UUFDSDZFLE9BQU8sQ0FBQ3JFLFNBQVMsQ0FBQ0MsR0FBRyxDQUFDLE1BQU0sQ0FBQztRQUM3Qm9FLE9BQU8sQ0FBQ00sS0FBSyxDQUFDQyxTQUFTLEdBQUdQLE9BQU8sQ0FBQ1MsWUFBWSxHQUFHLElBQUk7UUFDckRULE9BQU8sQ0FBQ00sS0FBSyxDQUFDRSxPQUFPLEdBQUcsTUFBTTtRQUM5Qk4sS0FBSyxDQUFDL0UsU0FBUyxHQUFHLFFBQVE7TUFDOUI7SUFDSixDQUFDLENBQUM7RUFDTixDQUFDLENBQUM7QUFFTixDQUFDLENBQUM7Ozs7Ozs7Ozs7OztBQ2xTd0I7QUFDMUJuQixNQUFNLENBQUMwRyxLQUFLLEdBQUdBLDZDQUFLO0FBRXBCMUcsTUFBTSxDQUFDMEcsS0FBSyxDQUFDQyxRQUFRLENBQUNiLE9BQU8sQ0FBQ2MsTUFBTSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsZ0JBQWdCOzs7Ozs7Ozs7OztBQ0gzRSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3Jlc291cmNlcy9qcy9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL2Jvb3RzdHJhcC5qcyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvc2Fzcy9hcHAuc2NzcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJy4vYm9vdHN0cmFwJztcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbihlKSB7XG5cbiAgICB0aGlzLndpbmRvdy5zaG93UGFzc3dvcmQgPSBmdW5jdGlvbiBzaG93UGFzc3dvcmQoaWQpe1xuICAgICAgICAgICAgbGV0IHBhc3N3b3JkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xuICAgICAgICBpZiAocGFzc3dvcmQudHlwZSA9PT0gXCJwYXNzd29yZFwiKSB7XG4gICAgICAgICAgICAgICAgcGFzc3dvcmQudHlwZSA9IFwidGV4dFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFzc3dvcmQudHlwZSA9IFwicGFzc3dvcmRcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLndpbmRvdy5hZGRMaXN0SXRlbSA9IGZ1bmN0aW9uIGFkZExpc3RJdGVtKCl7XG5cbiAgICAgICAgbGV0IGxpc3RVT00gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndW9tJykudmFsdWU7XG4gICAgICAgIGxldCBmaW5hbElFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbmFsLWknKTtcbiAgICAgICAgbGV0IGl0ZW1UYWJsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtLXRhYmxlLWJvZHknKTtcbiAgICAgICAgbGV0IGZpbmFsSSA9IGZpbmFsSUVsZW1lbnQudmFsdWU7XG4gICAgICAgIGZpbmFsSUVsZW1lbnQudmFsdWUgPSArZmluYWxJICsgMTtcblxuICAgICAgICBsZXQgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xuXG4gICAgICAgIC8vIENyZWF0ZSBjZWxscyBhbmQgaW5wdXQgZWxlbWVudHMuXG4gICAgICAgIGxldCBjZWxsMCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcbiAgICAgICAgY2VsbDAuc2NvcGUgPSAncm93JztcbiAgICAgICAgY2VsbDAuaW5uZXJIVE1MID0gZmluYWxJO1xuXG4gICAgICAgIGxldCBjZWxsMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcblxuICAgICAgICBsZXQgY291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgY291bnRlci50eXBlID0gXCJoaWRkZW5cIjtcbiAgICAgICAgY291bnRlci5uYW1lID0gXCJpZFtdXCI7XG4gICAgICAgIGNvdW50ZXIuaWQgPSAnaWQtJytmaW5hbEk7XG4gICAgICAgIGNvdW50ZXIudmFsdWUgPSBmaW5hbEk7XG4gICAgICAgIGNvdW50ZXIuc2V0QXR0cmlidXRlKCdkYXRhLWNvbHVtbi1uYW1lJywnaWQnKTtcblxuICAgICAgICBsZXQgaXRlbU5hbWUgPSAgY3JlYXRlTGlzdEl0ZW1JbnB1dCgndGV4dCcsJ2l0ZW1OYW1lJyxmaW5hbEksJ2l0ZW1fbmFtZScpO1xuICAgICAgICBpdGVtTmFtZS5wbGFjZWhvbGRlciA9ICdJdGVtIE5hbWUnO1xuICAgICAgICBpdGVtTmFtZS5jbGFzc0xpc3QuYWRkKCdmb3JtLWNvbnRyb2wnKTtcbiAgICAgICAgLy8gaXRlbU5hbWUub25jbGljayA9ICcnO1xuXG4gICAgICAgIGxldCBjZWxsMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgbGV0IGl0ZW1XZWlnaHQgPSBjcmVhdGVMaXN0SXRlbUlucHV0KCdudW1iZXInLCdpdGVtV2VpZ2h0JyxmaW5hbEksJ2l0ZW1fd2VpZ2h0Jyk7XG4gICAgICAgIGl0ZW1XZWlnaHQudmFsdWUgPSAwO1xuICAgICAgICBpdGVtV2VpZ2h0LmNsYXNzTGlzdC5hZGQoJ2Zvci13ZWlnaHQnKTtcbiAgICAgICAgaXRlbVdlaWdodC5jbGFzc0xpc3QuYWRkKCdudW1iZXItaW5wdXQnKTtcbiAgICAgICAgaXRlbVdlaWdodC5jbGFzc0xpc3QuYWRkKCdmb3JtLWNvbnRyb2wnKTtcbiAgICAgICAgY2VsbDIuY2xhc3NMaXN0LmFkZCgnbnVtYmVyLWNvbCcpO1xuXG4gICAgICAgIC8vZm9yIHJhZGlvcyBvbiBjbGljay0+IGdldENvbnZlcnNpb25SYXRlKCk7LlxuICAgICAgICAvL2FkZCBwb3VuZHMgYW5kIGtpbG9zP1xuICAgICAgICAvL3NldCB0b3RhbCBsYWJlbCBvbiBjbGlja1xuICAgICAgICBsZXQgY2VsbDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XG4gICAgICAgIGxldCBvdW5jZXNSYWRpbztcbiAgICAgICAgbGV0IHBvdW5kc1JhZGlvO1xuICAgICAgICBsZXQgZ3JhbXNSYWRpbztcbiAgICAgICAgbGV0IGtpbG9zUmFkaW87XG4gICAgICAgIGxldCBvdW5jZXNSYWRpb0xhYmVsO1xuICAgICAgICBsZXQgcG91bmRzUmFkaW9MYWJlbDtcbiAgICAgICAgbGV0IGdyYW1zUmFkaW9MYWJlbDtcbiAgICAgICAgbGV0IGtpbG9zUmFkaW9MYWJlbDtcblxuICAgICAgICBpZihsaXN0VU9NID09PSAndXMnKXtcblxuICAgICAgICAgICAgb3VuY2VzUmFkaW8gPSBjcmVhdGVSYWRpbygnaW5fb3VuY2VzJywgJycsICdveicsIGZpbmFsSSk7XG4gICAgICAgICAgICBvdW5jZXNSYWRpb0xhYmVsID0gY3JlYXRlTGFiZWwoJ09aJywgICd1b20tb3otJytmaW5hbEksICdveicsIGZpbmFsSSk7XG4gICAgICAgICAgICBwb3VuZHNSYWRpbyA9IGNyZWF0ZVJhZGlvKCdpbl9wb3VuZHMnLCAnJywgJ2xicycsIGZpbmFsSSk7XG4gICAgICAgICAgICBwb3VuZHNSYWRpb0xhYmVsID0gY3JlYXRlTGFiZWwoJ0xCUycsICAndW9tLWxicy0nK2ZpbmFsSSwgJ2xicycsIGZpbmFsSSk7XG5cbiAgICAgICAgfWVsc2V7XG5cbiAgICAgICAgICAgIGdyYW1zUmFkaW8gPSBjcmVhdGVSYWRpbygnaW5fZ3JhbXMnLCAnJywgJ2dyYW0nLCBmaW5hbEkpO1xuICAgICAgICAgICAgZ3JhbXNSYWRpb0xhYmVsID0gIGNyZWF0ZUxhYmVsKCdHcmFtcycsICAndW9tLWdyYW0tJytmaW5hbEksICdncmFtJywgZmluYWxJKTtcbiAgICAgICAgICAgIGtpbG9zUmFkaW8gPSAgY3JlYXRlUmFkaW8oJ2luX2tnJywgJycsICdrZycsIGZpbmFsSSk7XG4gICAgICAgICAgICBraWxvc1JhZGlvTGFiZWwgPSBjcmVhdGVMYWJlbCgnS0cnLCAgJ3VvbS1rZy0nK2ZpbmFsSSwgJ2tnJywgZmluYWxJKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjZWxsNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY2VsbDQuY2xhc3NMaXN0LmFkZCgnbnVtYmVyLWNvbCcpO1xuICAgICAgICBsZXQgcGFja2VkQW1vdW50ID0gY3JlYXRlTGlzdEl0ZW1JbnB1dCgnbnVtYmVyJywncGFja2VkQW1vdW50JyxmaW5hbEksJ2Ftb3VudCcpO1xuICAgICAgICBwYWNrZWRBbW91bnQudmFsdWUgPSAxO1xuXG4gICAgICAgIHBhY2tlZEFtb3VudC5jbGFzc0xpc3QuYWRkKCdmb3Itd2VpZ2h0Jyk7XG4gICAgICAgIHBhY2tlZEFtb3VudC5jbGFzc0xpc3QuYWRkKCdudW1iZXItaW5wdXQnKTtcbiAgICAgICAgcGFja2VkQW1vdW50LmNsYXNzTGlzdC5hZGQoJ2Zvcm0tY29udHJvbCcpO1xuXG4gICAgICAgIGxldCBjZWxsNSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgY2VsbDUuY2xhc3NMaXN0LmFkZCgnbnVtYmVyLWNvbCcpO1xuICAgICAgICBsZXQgdG90YWxMaW5lV2VpZ2h0ID0gY3JlYXRlTGlzdEl0ZW1JbnB1dCgnbnVtYmVyJywndG90YWxMaW5lV2VpZ2h0JyxmaW5hbEksJ3RvdGFsX2xpbmVfd2VpZ2h0Jyk7XG4gICAgICAgIHRvdGFsTGluZVdlaWdodC52YWx1ZSA9IDA7Ly9nZXRMaW5lVG90YWxXZWlnaHQoKTtcbiAgICAgICAgdG90YWxMaW5lV2VpZ2h0LnNldEF0dHJpYnV0ZSgnZGF0YS1jb2x1bW4tbmFtZScsJ3RvdGFsX2xpbmVfd2VpZ2h0Jyk7XG4gICAgICAgIHRvdGFsTGluZVdlaWdodC5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5Jyx0cnVlKTtcbiAgICAgICAgdG90YWxMaW5lV2VpZ2h0LmNsYXNzTGlzdC5hZGQoJ251bWJlci1pbnB1dCcpO1xuICAgICAgICB0b3RhbExpbmVXZWlnaHQuY2xhc3NMaXN0LmFkZCgnZm9ybS1jb250cm9sJyk7XG5cbiAgICAgICAgLy9hcHBlbmQgaW5wdXRzIHRvIGNlbGxzLlxuICAgICAgICBjZWxsMS5hcHBlbmRDaGlsZChjb3VudGVyKTtcbiAgICAgICAgY2VsbDEuYXBwZW5kQ2hpbGQoaXRlbU5hbWUpO1xuICAgICAgICBjZWxsMi5hcHBlbmRDaGlsZChpdGVtV2VpZ2h0KTtcblxuICAgICAgICBsZXQgc2VsZWN0Q2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcbiAgICAgICAgbGV0IGNhdGVnb3J5U2VsZWN0ID0gZ2V0Q2F0ZWdyb3lTZWxlY3QoZmluYWxJKTtcbiAgICAgICAgc2VsZWN0Q2VsbC5hcHBlbmQoY2F0ZWdvcnlTZWxlY3QpO1xuXG5cbiAgICAgICAgaWYobGlzdFVPTSA9PT0gJ3VzJyl7XG4gICAgICAgICAgICBjZWxsMy5hcHBlbmRDaGlsZChvdW5jZXNSYWRpbyk7XG4gICAgICAgICAgICBjZWxsMy5hcHBlbmRDaGlsZChvdW5jZXNSYWRpb0xhYmVsKTtcbiAgICAgICAgICAgIGNlbGwzLmFwcGVuZENoaWxkKHBvdW5kc1JhZGlvKTtcbiAgICAgICAgICAgIGNlbGwzLmFwcGVuZENoaWxkKHBvdW5kc1JhZGlvTGFiZWwpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGNlbGwzLmFwcGVuZENoaWxkKGdyYW1zUmFkaW8pO1xuICAgICAgICAgICAgY2VsbDMuYXBwZW5kQ2hpbGQoZ3JhbXNSYWRpb0xhYmVsKTtcbiAgICAgICAgICAgIGNlbGwzLmFwcGVuZENoaWxkKGtpbG9zUmFkaW8pO1xuICAgICAgICAgICAgY2VsbDMuYXBwZW5kQ2hpbGQoa2lsb3NSYWRpb0xhYmVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNlbGw0LmFwcGVuZENoaWxkKHBhY2tlZEFtb3VudCk7XG4gICAgICAgIGNlbGw1LmFwcGVuZENoaWxkKHRvdGFsTGluZVdlaWdodCk7XG5cbiAgICAgICAgLy8gQXBwZW5kIGNlbGxzIHRvIHRoZSByb3cuXG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsMCk7XG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChjZWxsMSk7XG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChzZWxlY3RDZWxsKTtcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwyKTtcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGw0KTtcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGw1KTtcbiAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwzKTtcblxuICAgICAgICAvLyBBcHBlbmQgdGhlIHJvdyB0byB0aGUgdGFibGUuXG4gICAgICAgIGl0ZW1UYWJsZS5hcHBlbmRDaGlsZChyb3cpO1xuXG4gICAgICAgIC8vYWRkIGZ1bmN0aW9uIHRvIGNhbGN1bGF0ZSB0b3RhbCB3ZWlnaHQuXG4gICAgICAgIGxldCBuZWVkZWRGb3JXZWlnaHRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvci13ZWlnaHQnKTtcbiAgICAgICAgbmVlZGVkRm9yV2VpZ2h0cy5mb3JFYWNoKGZ1bmN0aW9uIChuZWVkZWRGb3JXZWlnaHQpe1xuICAgICAgICAgICAgbmVlZGVkRm9yV2VpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGdldExpbmVUb3RhbFdlaWdodChmaW5hbEkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMud2luZG93LnVwZGF0ZVVPTSA9IGZ1bmN0aW9uIHVwZGF0ZVVPTSh2YWx1ZSkge1xuICAgICAgICBpZih2YWx1ZSAhPT0gJ3VzJyl7XG4gICAgICAgICAgIHVzUmFkaW9Ub01ldHJpYygpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIG1ldHJpY1JhZGlvVG9VcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0TGluZVRvdGFsV2VpZ2h0KHJvdyl7XG5cbiAgICAgICAgbGV0IHdlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtV2VpZ2h0LScrcm93KS52YWx1ZTtcbiAgICAgICAgbGV0IHBhY2tlZEFtb3VudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYWNrZWRBbW91bnQtJytyb3cpLnZhbHVlO1xuICAgICAgICBsZXQgbGluZVRvdGFsID0gMDtcblxuICAgICAgICBsaW5lVG90YWwgPSArd2VpZ2h0ICogK3BhY2tlZEFtb3VudDtcbiAgICAgICAgbGluZVRvdGFsID0gTWF0aC5yb3VuZCgobGluZVRvdGFsICsgTnVtYmVyLkVQU0lMT04pICogMTAwKSAvIDEwMDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdGFsTGluZVdlaWdodC0nK3JvdykudmFsdWUgPSBsaW5lVG90YWw7XG5cbiAgICB9XG4gICAgZnVuY3Rpb24gIGNyZWF0ZUxpc3RJdGVtSW5wdXQodHlwZSxuYW1lQmFzZSxyb3csY29sdW1uTmFtZSl7XG4gICAgICAgIGxldCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICBlbGVtZW50LnR5cGUgPSB0eXBlO1xuICAgICAgICBlbGVtZW50Lm5hbWUgPSBuYW1lQmFzZStcIltdXCI7XG4gICAgICAgIGVsZW1lbnQuaWQgPSBuYW1lQmFzZSsnLScrcm93O1xuICAgICAgICBlbGVtZW50LnZhbHVlID0gJyc7XG4gICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbHVtbi1uYW1lJyxjb2x1bW5OYW1lKTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG5cbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q2F0ZWdyb3lTZWxlY3Qocm93KXtcblxuICAgICAgICBsZXQgdmFsdWVzID0gWycnLCdjbG90aGVzJywnd29ybl9jbG90aGVzJywncmFpbl9nZWFyJywncGFja3MnLCdjb25zdW1hYmxlcycsJ3NoZWx0ZXInLCdmaXJlX2FuZF93YXRlcl90cmVhdG1lbnQnLCdsdXh1cnlfaXRlbScsJ3RlY2gnXTtcbiAgICAgICAgbGV0IHRleHRzID0gWydDaG9vc2UnLCdDbG90aGVzJywnV29ybiBDbG90aGVzJywgJ1JhaW4gR2VhcicsJ1BhY2tzJywnQ29uc3VtYmFibGVzJywnU2hlbHRlcicsJ0ZpcmUgYW5kIFdhdGVyIFRyZWF0bWVudCcsJ0x1eHVyeSBJdGVtJywnVGVjaCddO1xuICAgICAgICBsZXQgc2VsZWN0ID0gIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XG4gICAgICAgIHNlbGVjdC5pZCA9ICdJdGVtQ2F0ZWdvcnktJytyb3c7XG4gICAgICAgIHNlbGVjdC5uYW1lID0gJ2l0ZW1DYXRlZ29yeS0nK3JvdztcbiAgICAgICAgc2VsZWN0LnNldEF0dHJpYnV0ZSgnZGF0YS1jb2x1bW4tbmFtZScsJ2l0ZW1fY2F0ZWdvcnknKTtcbiAgICAgICAgc2VsZWN0LmNsYXNzTmFtZSA9ICdmb3JtLWNvbnRyb2wnO1xuXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgbGV0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSB2YWx1ZXNbaV07XG4gICAgICAgICAgICBvcHRpb24udGV4dCA9IHRleHRzW2ldO1xuICAgICAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlbGVjdDtcblxuICAgIH1cbiAgICBmdW5jdGlvbiBtZXRyaWNSYWRpb1RvVXMoKXtcbiAgICAgICAgbGV0IGlucHV0RWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubWV0cmljLXJhZGlvJyk7XG4gICAgICAgIGlucHV0RWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXRFbGVtZW50KSB7XG5cbiAgICAgICAgICAgIGxldCBpZEFyciA9IGlucHV0RWxlbWVudC5pZC5zcGxpdCgnLScpO1xuICAgICAgICAgICAgbGV0IHVvbSA9IGlkQXJyWzFdO1xuICAgICAgICAgICAgbGV0IHJvdyA9IGlkQXJyW2lkQXJyLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgbGV0IGVsZW1lbnRUeXBlID0gaW5wdXRFbGVtZW50LnR5cGU7XG4gICAgICAgICAgICBsZXQgZWxlbWVudFRhZyA9IGlucHV0RWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgIGxldCBuZXdFbGVtZW50O1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudFR5cGUgPT09ICdyYWRpbycgJiYgdW9tID09PSAnZ3JhbScpIHtcbiAgICAgICAgICAgICAgICBuZXdFbGVtZW50ID0gY3JlYXRlUmFkaW8oJ2luX291bmNlcycsICdPWicsICdveicsIHJvdywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnRUeXBlID09PSAncmFkaW8nICYmIHVvbSA9PT0gJ2tnJykge1xuICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQgPSBjcmVhdGVSYWRpbygnaW5fcG91bmRzJywgJ0xCUycsICdsYnMnLCByb3cpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50VGFnID09PSAnbGFiZWwnICYmIHVvbSA9PT0gJ2dyYW0nKSB7XG4gICAgICAgICAgICAgICAgbmV3RWxlbWVudCA9IGNyZWF0ZUxhYmVsKCdPWicsICd1b20tb3otJyArIHJvdywgJ296Jywgcm93KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFRhZyA9PT0gJ2xhYmVsJyAmJiB1b20gPT09ICdrZycpIHtcbiAgICAgICAgICAgICAgICBuZXdFbGVtZW50ID0gY3JlYXRlTGFiZWwoJ0xCUycsICd1b20tbGJzLScgKyByb3csICdsYnMnLCByb3cpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlcGxhY2VDaGlsZChuZXdFbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH1cbiAgICBmdW5jdGlvbiB1c1JhZGlvVG9NZXRyaWMoKXtcbiAgICAgICAgbGV0IGlucHV0RWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudXMtcmFkaW8nKTtcbiAgICAgICAgaW5wdXRFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQpIHtcblxuICAgICAgICAgICAgbGV0IGlkQXJyID0gaW5wdXRFbGVtZW50LmlkLnNwbGl0KCctJyk7XG4gICAgICAgICAgICBsZXQgdW9tID0gaWRBcnJbMV07XG4gICAgICAgICAgICBsZXQgcm93ID0gaWRBcnJbaWRBcnIubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBsZXQgZWxlbWVudFR5cGUgPSBpbnB1dEVsZW1lbnQudHlwZTtcbiAgICAgICAgICAgIGxldCBlbGVtZW50VGFnID0gaW5wdXRFbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGxldCBuZXdFbGVtZW50O1xuXG4gICAgICAgICAgICBpZiAoZWxlbWVudFR5cGUgPT09ICdyYWRpbycgJiYgdW9tID09PSAnb3onKSB7XG4gICAgICAgICAgICAgICAgbmV3RWxlbWVudCA9IGNyZWF0ZVJhZGlvKCdpbl9ncmFtcycsICdHcmFtcycsICdncmFtJywgcm93KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudFR5cGUgPT09ICdyYWRpbycgJiYgdW9tID09PSAnbGJzJykge1xuICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQgPSBjcmVhdGVSYWRpbygnaW5fa2cnLCAnS0cnLCAna2cnLCByb3cpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50VGFnID09PSAnbGFiZWwnICYmIHVvbSA9PT0gJ296Jykge1xuICAgICAgICAgICAgICAgIG5ld0VsZW1lbnQgPSBjcmVhdGVMYWJlbCgnR3JhbXMnLCAndW9tLWdyYW0tJyArIHJvdywgJ2dyYW0nLCByb3cpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50VGFnID09PSAnbGFiZWwnICYmIHVvbSA9PT0gJ2xicycpIHtcbiAgICAgICAgICAgICAgICBuZXdFbGVtZW50ID0gY3JlYXRlTGFiZWwoJ0tHJywgJ3VvbS1rZy0nICsgcm93LCAna2cnLCByb3cpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3RWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50LnJlcGxhY2VDaGlsZChuZXdFbGVtZW50LCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY3JlYXRlUmFkaW8oZGF0YUNvbHVtbk5hbWUsIGxhYmVsLCB1b20sIHJvdykge1xuXG4gICAgICAgIGxldCByYWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgcmFkaW8uY2xhc3NOYW1lID0gJ2Zvcm0tY2hlY2staW5wdXQnICsgKHVvbSA9PT0gJ2dyYW0nIHx8IHVvbSA9PT0gJ2tnJyA/ICcgbWV0cmljLXJhZGlvJyA6ICcgdXMtcmFkaW8nKTtcbiAgICAgICAgcmFkaW8udHlwZSA9IFwicmFkaW9cIjtcbiAgICAgICAgcmFkaW8ubmFtZSA9IFwidW9tLVwiICsgcm93ICsgXCJbXVwiO1xuICAgICAgICByYWRpby5pZCA9ICd1b20tJyArIHVvbSArICctJyArIHJvdztcbiAgICAgICAgcmFkaW8uc2V0QXR0cmlidXRlKCdkYXRhLWNvbHVtbi1uYW1lJywgZGF0YUNvbHVtbk5hbWUpO1xuXG4gICAgICAgIGlmKHVvbSA9PT0gJ2dyYW0nIHx8IHVvbSA9PT0gJ296Jyl7XG4gICAgICAgICAgICByYWRpby5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJhZGlvLmNsYXNzTGlzdC5hZGQoJ2Zvci13ZWlnaHQnKTtcbiAgICAgICAgcmV0dXJuIHJhZGlvO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVMYWJlbChpbm5lckh0bWwsIGh0bWxGb3IsIHVvbSwgcm93KSB7XG5cbiAgICAgICAgbGV0IGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgICAgICBsYWJlbC5jbGFzc05hbWUgPSAnZm9ybS1jaGVjay1sYWJlbCcgKyAodW9tID09PSAnZ3JhbScgfHwgdW9tID09PSAna2cnID8gJyBtZXRyaWMtcmFkaW8nIDogJyB1cy1yYWRpbycpO1xuICAgICAgICBsYWJlbC5odG1sRm9yID0gaHRtbEZvcjtcbiAgICAgICAgbGFiZWwuaW5uZXJIVE1MID0gaW5uZXJIdG1sO1xuICAgICAgICBsYWJlbC5pZCA9ICd1b20tJyArIHVvbSArICctbGFiZWwtJyArIHJvdztcbiAgICAgICAgcmV0dXJuIGxhYmVsO1xuICAgIH1cblxuICAgIGNvbnN0IGhlYWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9ybS1jb2xsYXBzaWJsZS1oZWFkZXInKTtcblxuICAgIGhlYWRlcnMuZm9yRWFjaChoZWFkZXIgPT4ge1xuICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gaGVhZGVyLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgICAgIGNvbnN0IGFycm93ID0gaGVhZGVyLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWFycm93Jyk7XG4gICAgICAgICAgICBpZiAoY29udGVudC5jbGFzc0xpc3QuY29udGFpbnMoJ29wZW4nKSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBjb250ZW50LnN0eWxlLnBhZGRpbmcgPSAnMCAxMHB4JztcbiAgICAgICAgICAgICAgICBhcnJvdy5pbm5lckhUTUwgPSAnJiM5NjYwJztcblxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gY29udGVudC5zY3JvbGxIZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICAgICAgICAgICAgICBhcnJvdy5pbm5lckhUTUwgPSAnJiM5NjUwJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbn0pO1xuXG5cbiIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG53aW5kb3cuYXhpb3MgPSBheGlvcztcblxud2luZG93LmF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLVJlcXVlc3RlZC1XaXRoJ10gPSAnWE1MSHR0cFJlcXVlc3QnO1xuIiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307Il0sIm5hbWVzIjpbIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwic2hvd1Bhc3N3b3JkIiwiaWQiLCJwYXNzd29yZCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0eXBlIiwiYWRkTGlzdEl0ZW0iLCJsaXN0VU9NIiwidmFsdWUiLCJmaW5hbElFbGVtZW50IiwiaXRlbVRhYmxlIiwiZmluYWxJIiwicm93IiwiY3JlYXRlRWxlbWVudCIsImNlbGwwIiwic2NvcGUiLCJpbm5lckhUTUwiLCJjZWxsMSIsImNvdW50ZXIiLCJuYW1lIiwic2V0QXR0cmlidXRlIiwiaXRlbU5hbWUiLCJjcmVhdGVMaXN0SXRlbUlucHV0IiwicGxhY2Vob2xkZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJjZWxsMiIsIml0ZW1XZWlnaHQiLCJjZWxsMyIsIm91bmNlc1JhZGlvIiwicG91bmRzUmFkaW8iLCJncmFtc1JhZGlvIiwia2lsb3NSYWRpbyIsIm91bmNlc1JhZGlvTGFiZWwiLCJwb3VuZHNSYWRpb0xhYmVsIiwiZ3JhbXNSYWRpb0xhYmVsIiwia2lsb3NSYWRpb0xhYmVsIiwiY3JlYXRlUmFkaW8iLCJjcmVhdGVMYWJlbCIsImNlbGw0IiwicGFja2VkQW1vdW50IiwiY2VsbDUiLCJ0b3RhbExpbmVXZWlnaHQiLCJhcHBlbmRDaGlsZCIsInNlbGVjdENlbGwiLCJjYXRlZ29yeVNlbGVjdCIsImdldENhdGVncm95U2VsZWN0IiwiYXBwZW5kIiwibmVlZGVkRm9yV2VpZ2h0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwibmVlZGVkRm9yV2VpZ2h0IiwiZ2V0TGluZVRvdGFsV2VpZ2h0IiwidXBkYXRlVU9NIiwidXNSYWRpb1RvTWV0cmljIiwibWV0cmljUmFkaW9Ub1VzIiwid2VpZ2h0IiwibGluZVRvdGFsIiwiTWF0aCIsInJvdW5kIiwiTnVtYmVyIiwiRVBTSUxPTiIsIm5hbWVCYXNlIiwiY29sdW1uTmFtZSIsImVsZW1lbnQiLCJ2YWx1ZXMiLCJ0ZXh0cyIsInNlbGVjdCIsImNsYXNzTmFtZSIsImkiLCJsZW5ndGgiLCJvcHRpb24iLCJ0ZXh0IiwiaW5wdXRFbGVtZW50cyIsImlucHV0RWxlbWVudCIsImlkQXJyIiwic3BsaXQiLCJ1b20iLCJlbGVtZW50VHlwZSIsImVsZW1lbnRUYWciLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJuZXdFbGVtZW50IiwicGFyZW50RWxlbWVudCIsInJlcGxhY2VDaGlsZCIsImRhdGFDb2x1bW5OYW1lIiwibGFiZWwiLCJyYWRpbyIsImNoZWNrZWQiLCJpbm5lckh0bWwiLCJodG1sRm9yIiwiaGVhZGVycyIsImhlYWRlciIsImNvbnRlbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJhcnJvdyIsInF1ZXJ5U2VsZWN0b3IiLCJjb250YWlucyIsInJlbW92ZSIsInN0eWxlIiwibWF4SGVpZ2h0IiwicGFkZGluZyIsInNjcm9sbEhlaWdodCIsImF4aW9zIiwiZGVmYXVsdHMiLCJjb21tb24iXSwic291cmNlUm9vdCI6IiJ9